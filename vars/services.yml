---

global:
  nzbget:
    name: nzbget
    port:
      http: 6789
    config:
      server:
        retention: 3393
  transmission:
    name: transmission
    port:
      web: 9091
  nzbhydra:
    name: nzbhydra
    port: 5075
    config:
      main:
        apikey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35666239356135366630393333376333633936363636646263353436363137366130303838333537
          6334653132373463366232366334653863656564343235360a623935373930313838636566366264
          62313863326631656334633761356330666534366263313631666261643066323830623434373261
          3465373830323031650a313935323833336365346132383661633930313230356639623134393833
          39643737343434376230363062623738633862303862343963353231373834666430376133356462
          6435656338323731616235633532326137323962623637346339
        urlBase: /nzbhydra
  nzbhydra2:
    name: nzbhydra2
    port: 5076
    config:
      main:
        apikey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35666239356135366630393333376333633936363636646263353436363137366130303838333537
          6334653132373463366232366334653863656564343235360a623935373930313838636566366264
          62313863326631656334633761356330666534366263313631666261643066323830623434373261
          3465373830323031650a313935323833336365346132383661633930313230356639623134393833
          39643737343434376230363062623738633862303862343963353231373834666430376133356462
          6435656338323731616235633532326137323962623637346339
        urlBase: /nzbhydra2
  sonarr:
    name: sonarr
    port:
      http: 8989
    config:
      urlbase: /sonarr
      apikey: !vault |
        $ANSIBLE_VAULT;1.1;AES256
        63366462353864323163646139346335363032396164393265333333666634316362346137313834
        3238663564313764343434633939353230303165343831630a663434316634303563326531646465
        33666532623762616630666337356337646633313063333031333635366637626139396662613062
        3336316662336661340a643431303532666166636232333466376231363938366263613835643336
        65643466326339323165623066346335626561376665616136393662373737376131646534336332
        6265366634623462313364393461343761363631313030303135
  couchpotato:
    name: couchpotato
    port:
      http: 5050
    config:
      core:
        apikey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39353766343335346639383166636364653737666466653335653837353836626332636162303865
          6436613264356437376634633065643632393339376262300a303731323064383466313432636138
          31333838363035663431336138646238626265393135356264313466663163343131616633343337
          6663653966306335350a333737353333613933343130663333333461363062373165313031613835
          64653066303263303237356466376462613139396565346634663863306532303238623063663562
          3363636133363835336133666234333238346362333336646537
        urlbase: /couchpotato
  organizr:
    name: organizr
  portainer:
    name: portainer
    port:
      http: 9000
  jdownloader:
    name: jdownloader
    port:
      http: 5800
  nginx:
    name: nginx

services:
# -
#   name: Muximux
#   location: /
#   # Muximux is running on port 80 on the host but exposed through 8080 on the host
#   proxy_pass: "http://{{ muximux.name }}.{{ docker.network }}"
-
  name: Organizr
  location: /
  proxy_pass: "http://{{ global.organizr.name }}.{{ docker.network }}"
-
  name: NZBGet
  location: /nzbget/
  proxy_pass: "http://{{ global.nzbget.name }}.{{ docker.network }}:{{ global.nzbget.port.http}}"
-
  name: Sonarr
  location: /sonarr
  proxy_pass: "http://{{ global.sonarr.name }}.{{ docker.network }}:{{ global.sonarr.port.http }}{{ global.sonarr.config.urlbase }}"
  include:
    - "include {{ nginx.proxy.file }}"
-
  name: "NZB Hydra"
  location: /nzbhydra
  proxy_pass: "http://{{ global.nzbhydra.name }}.{{ docker.network}}:{{ global.nzbhydra.port }}{{ global.nzbhydra.config.main.urlBase }}"
-
  name: Transmission
  location: /transmission
  proxy_pass: "http://{{ global.transmission.name }}.{{ docker.network }}:{{ global.transmission.port.web }}"
-
  name: CouchPotato
  location: /couchpotato
  proxy_pass: "http://{{ global.couchpotato.name }}.{{ docker.network }}:{{ global.couchpotato.port.http }}{{ global.couchpotato.config.core.urlbase }}"
-
  name: JDownloader
  location: /jdownloader/
  proxy_pass: "http://{{ global.jdownloader.name }}.{{ docker.network }}:{{ global.jdownloader.port.http }}/"
  include:
    - 'proxy_set_header Upgrade $http_upgrade'
    - 'proxy_set_header Connection "upgrade"'
    - 'proxy_http_version 1.1'
-
  name: JDownloader Websocket
  location: /websockify
  proxy_pass: "http://{{ global.jdownloader.name }}.{{ docker.network }}:{{ global.jdownloader.port.http }}/websockify"
  include:
    - 'proxy_set_header Upgrade $http_upgrade'
    - 'proxy_set_header Connection "upgrade"'
    - 'proxy_http_version 1.1'
    - 'proxy_read_timeout 61s'
    - 'proxy_buffering off'
-
  name: Portainer
  location: /portainer/
  # Portainer has an upstream configurationin NGINX so 'portainer' alone here will work
  proxy_pass: "http://portainer/"
  include:
    - 'proxy_http_version 1.1'
    - 'proxy_set_header Connection ""'
-
  name: Portainer Web Socket
  location: /portainer/api/websocket/
  proxy_pass: "http://portainer/api/websocket/"
  include:
    - 'proxy_set_header Upgrade $http_upgrade'
    - 'proxy_set_header Connection "upgrade"'
    - 'proxy_http_version 1.1'
# -
#   name: Radarr
#   location: /radarr
#   icon:  "muximux-movie_creation"
#   color: "#ff9900"
#   proxy_pass: "http://{{ radarr.name }}.{{ docker.network }}:{{ radarr.port.http }}{{ radarr.config.urlbase }}"
#   include:
#     - "{{ nginx.proxy.file }}"
